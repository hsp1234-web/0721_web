# 鳳凰之心 - 專案變更日誌

本文件旨在記錄「鳳凰之心」專案的重大架構變更、重構或設計理念的演進。當您對專案的歷史背景或某項特定變更的原因感到好奇時，這裡就是您的第一參考。

我們鼓勵在進行任何足以影響專案核心結構或開發流程的重大變更後，在此處留下一筆清晰的紀錄。

---

## 2025-07-31: v19 - 穩定性強化與專案清理

**目標**：修復報告生成流程中的潛在錯誤，並對專案進行全面清理，移除過時檔案，使結構更清晰。

### 1. 核心流程強化 (Core Flow Hardening)
*   **錯誤傳遞修復**：修正了 `scripts/launch.py`，確保其在呼叫 `scripts/generate_report.py` 失敗時，能以非零錯誤碼退出。這解決了先前錯誤被「靜默」處理，導致上層測試（如 `smart_e2e_test.py`）無法偵測到失敗的問題。
*   **依賴自動化**：`scripts/launch.py` 現在會在使用 `pip` 執行報告生成前，自動安裝 `pandas`, `sparklines` 等必要依賴，確保了報告功能的開箱即用性。

### 2. 專案清理 (Project Cleanup)
*   **移除過時腳本**：刪除了 `scripts/phoenix_starter.py`，因其功能已完全被 `scripts/launch.py` 和 `scripts/smart_e2e_test.py` 的組合所取代。
*   **清理執行產物**：從版本控制中移除了多個在執行時才會產生的目錄和檔案，例如 `logs/`, `temp/`, `WEB1/`, `*.db` 檔案以及各種 `__pycache__` 目錄。
*   **強化 `.gitignore`**：更新了 `.gitignore` 檔案，確保所有被移除的執行產物在未來不會被意外地再次提交。

### 3. 文件現代化 (Documentation Modernization)
*   **`README.md` 更新**：完全重寫了「如何開始」部分，移除了對已刪除腳本的引用，並提供了基於 `run/colab_runner.py`（Colab 環境）和 `scripts/smart_e2e_test.py`（本機開發）的最新、最準確的操作指南。
*   **`docs/ARCHITECTURE.md` 更新**：修正了 Mermaid 圖表中的語法錯誤，並移除了描述過時 V4 架構的章節，使其內容與專案的 v18+ 架構保持一致。

## 2025-07-31: v18 - 專案結構重構與文件現代化

**目標**：提升專案的長期可維護性，使目錄結構更符合直覺，並讓技術文件與實際狀態保持同步。

### 1. 腳本重構 (Script Refactoring)

*   **變更前**：多個核心執行腳本 (`launch.py`, `smart_e2e_test.py`, `generate_report.py` 等) 散落在專案的根目錄，造成了結構上的混亂。
*   **變更後**：
    *   建立了一個新的 `scripts/` 目錄。
    *   所有上述腳本均被移動到 `scripts/` 目錄中，使其成為所有主要工具的統一入口。
    *   修正了所有因路徑變更而產生的 `import` 語句和 `subprocess` 呼叫，並透過完整測試驗證了功能的完整性。
*   **理由**：將可執行的工具與設定檔、原始碼目錄分離，是更標準、更清晰的專案組織方式，有助於新成員快速理解專案佈局。

### 2. 文件更新 (Documentation Update)

*   **`docs/ARCHITECTURE.md` 更新**:
    *   檔案結構圖已完全更新，以精確反映 `scripts/` 目錄的引入。
    *   Mermaid 架構流程圖中的節點也同步更新，顯示了 `scripts/launch.py` 等新路徑。
    *   擴充了「核心目錄與檔案詳解」章節，為每個主要目錄提供了更詳盡的功能說明。

*   **`README.md` 現代化**:
    *   **移除了舊的儀表板文字草圖**：原先在 `README.md` 中用於展示 `phoenix_starter.py` 啟動器畫面的詳細文字圖已被移除。作為歷史參考，被移除的草圖如下：
      ```text
      ┌─ 🚀 鳳凰之心視覺化啟動器 v9.2 ───────────────────────────────────────────────┐
      │                                                                              │
      ├─ 🌐 系統狀態 (System Status) ────────────────────────────────────────────────┤
      │ 🟢 運行中   核心: 25.6%   RAM: 0.3/8.3 GB (6.8%)   DISK: 1.0/10.5 GB (10.2%)  │
      │                                                                              │
      ├─ 📦 應用程式狀態 (Application Status) ───────────────────────────────────────┤
      │ 📈 Quant App         [🟢 測試通過]         🎤 Transcriber App   [🟢 測試通過]         │
      │                                                                              │
      ├─ 📜 即時日誌 (Live Logs) ────────────────────────────────────────────────────┤
      │ [04:59:53] [INFO] ============================== 4 passed in 2.62s =============================== │
      │ [04:59:53] [INFO] --- 開始為 App 'transcriber' 進行安全安裝 ---             │
      │ [04:59:53] [INFO] --- [4/4] 準備安裝: pydantic ---                          │
      │ [04:59:53] [INFO] 資源充足。開始安裝 'pydantic'...                         │
      │ [04:59:55] [INFO] ========================= 4 passed, 1 skipped in 0.63s ========================= │
      │                                                                              │
      ├─ ✨ 當前任務 (Current Task) ─────────────────────────────────────────────────┤
      │ [空閒]                                                                       │
      │                                                                              │
      └──────────────────────────────────────────────────────────────────────────────┘
      ```
    *   **簡化檔案結構圖**：用一個更簡潔、高層次的檔案結構圖替換了原有的詳細結構圖。
    *   **理由**：讓 `README.md` 更聚焦於其核心使命——提供專案的快速上手指南。詳細的技術細節和架構圖則統一由 `docs/ARCHITECTURE.md` 提供，實現了資訊的合理分層。

*   **`docs/CHANGELOG.md` 的建立**:
    *   建立了此檔案，作為未來所有重大變更的官方紀錄。
