<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鳳凰之心 - 最終駕駛艙原型 v14.0 (定稿)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* 全局變量定義 */
        :root {
            --color-bg: #131314;
            --color-panel-bg: #1e1f20;
            --color-border: #3c4043;
            --color-text: #e8eaed;
            --color-dim: #9aa0a6;
            --color-header: #8ab4f8;
            --color-ok: #34a853;
            --color-warn: #fbbc04;
            --color-error: #ea4335;
            --color-info: #4285f4;
            --color-battle: #8ab4f8;
            --font-mono: 'Fira Code', 'Courier New', monospace;
            --font-sans: 'Noto Sans TC', sans-serif;
            --base-font-size: 15px; /* 基礎字體大小 */
            --line-height: 1.8; /* 基礎行高 */
        }

        /* 全局重置與基礎樣式 */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; /* 防止整體滾動條 */
            box-sizing: border-box; /* 確保所有元素盒模型一致 */
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: var(--font-mono);
            font-size: var(--base-font-size);
            line-height: var(--line-height);
            display: flex;
            flex-direction: column; /* 主軸為垂直方向 */
        }

        /* 顏色工具類 */
        .ok { color: var(--color-ok); }
        .warn { color: var(--color-warn); }
        .error { color: var(--color-error); }
        .info { color: var(--color-info); }
        .battle { color: var(--color-battle); }
        .header { color: var(--color-header); }
        .dim { color: var(--color-dim); }
        .highlight { color: #ffffff; font-weight: bold; }

        /* 通用排版與隱藏 */
        pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; } /* 預格式化文本自動換行 */
        .hidden { display: none !important; } /* 隱藏元素 */

        /* 啟動畫面樣式 */
        #boot-screen {
            padding: 20px;
            flex-grow: 1; /* 佔據剩餘空間 */
            overflow-y: auto; /* 允許垂直滾動 */
        }
        .progress-bar-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .progress-bar-container .label {
            min-width: 220px; /* 固定標籤寬度以對齊，確保一致性 */
        }

        /* 儀表板樣式 */
        #dashboard {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* 頂部面板樣式 */
        #top-panel {
            padding: 15px 20px;
            border-bottom: 1px solid var(--color-border);
            background-color: var(--color-panel-bg);
            display: flex;
            flex-wrap: wrap; /* 允許項目換行 */
            gap: 20px 30px; /* 行間距和列間距 */
            align-items: flex-start;
            flex-shrink: 0; /* 不壓縮此面板 */
        }
        .panel-section {
            flex: 1; /* 彈性佔據空間 */
            min-width: 280px; /* 最小寬度，確保在小螢幕上不會過窄 */
        }
        .panel-title {
            font-family: var(--font-sans);
            font-weight: bold;
            color: var(--color-header);
            margin-bottom: 10px;
        }
        .service-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .service-icon { min-width: 2.2em; } /* 圖標最小寬度 */
        .app-button {
            background-color: var(--color-battle);
            color: var(--color-bg);
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            font-family: var(--font-sans);
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s;
            white-space: nowrap; /* 防止按鈕文字換行 */
        }
        .app-button:hover { background-color: #a8c7fa; }

        /* 主資訊流容器樣式 */
        #main-stream-container {
            flex-grow: 1; /* 佔據剩餘垂直空間 */
            overflow-y: auto; /* 允許垂直滾動 */
            padding: 10px 20px 60px 20px; /* 底部留出狀態欄空間 */
        }
        .stream-item {
            margin-bottom: 15px; /* 日誌條目間距 */
            word-wrap: break-word; /* 確保內容自動斷行 */
            overflow-wrap: break-word; /* 更好的斷行控制 */
        }
        .stream-meta {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .stream-icon { min-width: 2em; }
        .stream-ts { color: var(--color-dim); }
        .stream-level { font-weight: bold; min-width: 90px; } /* 固定等級寬度以對齊 */

        /* 用於標準文字日誌的內容區塊，保持縮進 */
        .stream-text-content {
            padding-left: calc(2em + 15px); /* 與圖標對齊 */
            margin-top: 5px; /* 與元數據行產生間距 */
        }

        /* 用於數據塊（如表格）的內容區塊，無縮進，並控制其上下間距 */
        .stream-block-content {
            margin-top: 0.8em; /* 半行空行 */
            padding-left: 0; /* 確保數據塊靠左對齊 */
            padding-bottom: 0.8em; /* 半行空行 */
        }

        /* 數據流表格樣式 */
        .data-stream-table {
            border: 1px solid var(--color-border);
            padding: 10px;
            background: rgba(0,0,0,0.2);
            border-radius: 5px;
            display: block; /* 確保是塊級元素 */
            width: 100%; /* 佔據其父容器的全部寬度 */
            max-width: 100%;
            box-sizing: border-box;
            margin: 0; /* 移除任何自動邊距，確保靠左 */
        }
        .ds-row { display: flex; /* 使用 flexbox 實現表格行 */
            flex-wrap: wrap; /* 允許單元格換行 */
        }
        .ds-cell {
            flex: 1; /* 彈性佔據空間 */
            padding: 2px 10px;
            border-bottom: 1px solid var(--color-border);
            min-width: 80px; /* 確保單元格有最小寬度 */
            word-wrap: break-word; /* 確保單元格內容自動斷行 */
            overflow-wrap: break-word;
        }
        .ds-row:last-child .ds-cell { border-bottom: none; }
        .ds-header .ds-cell { font-weight: bold; color: var(--color-header); }
        /* 針對分隔線的特殊樣式 */
        .ds-separator .ds-cell { padding: 0; height: 1px; background: var(--color-border); flex-basis: 100%; } /* 分隔線佔滿整行 */

        /* 狀態欄樣式 */
        #status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--color-panel-bg);
            padding: 8px 20px;
            border-top: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            z-index: 10;
            box-sizing: border-box;
        }
        .status-group { display: flex; gap: 25px; }

        /* --- 響應式設計：媒體查詢 --- */

        /* 針對小螢幕設備 (例如手機，寬度小於 768px) */
        @media (max-width: 767px) {
            body {
                font-size: 13px; /* 縮小字體 */
                line-height: 1.6;
            }
            #top-panel {
                flex-direction: column; /* 頂部面板項目垂直堆疊 */
                padding: 10px 15px;
                gap: 15px;
            }
            .panel-section {
                min-width: auto; /* 移除最小寬度限制 */
                width: 100%; /* 佔滿可用寬度 */
            }
            #main-stream-container {
                padding: 10px 15px 60px 15px; /* 調整內邊距 */
            }
            .stream-meta {
                flex-direction: column; /* 日誌元數據垂直堆疊 */
                align-items: flex-start;
                gap: 5px;
            }
            .stream-icon { min-width: auto; } /* 圖標寬度自適應 */
            .stream-level { min-width: auto; } /* 等級寬度自適應 */
            .stream-text-content {
                padding-left: 0; /* 手機上文字內容不縮進，直接在元數據下方 */
            }
            .stream-block-content {
                margin-top: 0.5em; /* 調整間距 */
                padding-bottom: 0.5em;
            }
            .data-stream-table .ds-cell {
                min-width: 100%; /* 手機上單元格佔滿一行 */
                flex-basis: 100%;
            }
            .ds-row {
                flex-direction: column; /* 表格行內的單元格垂直堆疊 */
            }
            .ds-header .ds-cell {
                border-bottom: none; /* 手機模式下移除表頭下邊線 */
            }
            .ds-separator .ds-cell {
                display: none; /* 手機模式下隱藏分隔線 */
            }
            #status-bar {
                padding: 5px 15px;
                font-size: 12px;
                flex-direction: column; /* 狀態欄項目垂直堆疊 */
                gap: 5px;
                align-items: flex-start;
            }
            .status-group { gap: 10px; }
        }

        /* 針對平板設備 (寬度在 768px 到 1024px 之間) */
        @media (min-width: 768px) and (max-width: 1024px) {
            body {
                font-size: 14px;
            }
            #top-panel {
                padding: 15px 25px;
                gap: 25px;
            }
            .panel-section {
                min-width: 250px;
            }
            #main-stream-container {
                padding: 15px 25px 60px 25px;
            }
            .stream-text-content {
                padding-left: calc(2em + 10px); /* 微調縮進 */
            }
            .data-stream-table .ds-cell {
                min-width: 120px; /* 平板上單元格最小寬度 */
            }
        }

        /* 針對桌面設備 (寬度大於 1024px) */
        @media (min-width: 1025px) {
            body {
                font-size: 15px;
            }
            #top-panel {
                padding: 20px 30px;
                gap: 40px;
            }
            .panel-section {
                min-width: 300px;
            }
            #main-stream-container {
                padding: 20px 30px 60px 30px;
            }
            .stream-text-content {
                padding-left: calc(2em + 15px);
            }
            .data-stream-table .ds-cell {
                min-width: 150px; /* 桌面單元格最小寬度 */
            }
        }
    </style>
</head>
<body>

    <div id="boot-screen"></div>

    <div id="dashboard" class="hidden">
        <div id="top-panel">
            <div class="panel-section">
                <div class="panel-title">⚙️ 即時資源監控</div>
                <pre id="ascii-stats"></pre>
            </div>
            <div class="panel-section">
                <div class="panel-title">🌐 核心服務狀態</div>
                <div id="service-status"></div>
            </div>
            <div class="panel-section">
                <div class="panel-title">🚀 應用程式入口</div>
                <button class="app-button" onclick="alert('模擬跳轉至 Web 應用程式！')">進入鳳凰之心主介面</button>
            </div>
        </div>
        <div id="main-stream-container"></div>
        <div id="status-bar"></div>
    </div>

    <script src="/static/main.js"></script>
</body>
</html>
