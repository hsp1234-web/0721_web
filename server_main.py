# ==============================================================================
#                      æ ¸å¿ƒæœå‹™å•Ÿå‹•å™¨ (Core Service Launcher)
#
#   æ­¤è…³æœ¬æ˜¯å°ˆç‚ºç”Ÿç”¢ç’°å¢ƒå’Œ Colab ç’°å¢ƒè¨­è¨ˆçš„ã€æ¥µç°¡çš„æœå‹™å•Ÿå‹•å™¨ã€‚
#
#   å…¶å”¯ä¸€è·è²¬æ˜¯ï¼š
#   - è§£æå‘½ä»¤åˆ—å‚³å…¥çš„ --host å’Œ --port åƒæ•¸ã€‚
#   - ä½¿ç”¨ uvicorn ä»¥é˜»å¡æ¨¡å¼ï¼Œé•·æœŸé‹è¡Œä¸» FastAPI æ‡‰ç”¨ (`main:app`)ã€‚
#
#   é€™ç¢ºä¿äº†å®ƒä½œç‚ºä¸€å€‹å­é€²ç¨‹æ™‚ï¼Œèƒ½å¤ ä¿æŒå­˜æ´»ï¼Œå¾è€Œè®“çˆ¶é€²ç¨‹
#   (å¦‚ colab_run.py) çš„ç›£æ§è¿´åœˆå¯ä»¥æŒçºŒé‹ä½œã€‚
#
# ==============================================================================

import argparse
import uvicorn

def main():
    """
    è§£æå‘½ä»¤åˆ—åƒæ•¸ä¸¦å•Ÿå‹• Uvicorn ä¼ºæœå™¨ã€‚
    """
    parser = argparse.ArgumentParser(description="é³³å‡°ä¹‹å¿ƒæ ¸å¿ƒæœå‹™å•Ÿå‹•å™¨")
    parser.add_argument(
        "--host",
        type=str,
        default="0.0.0.0",
        help="ä¼ºæœå™¨ç›£è½çš„ä¸»æ©Ÿä½å€"
    )
    parser.add_argument(
        "--port",
        type=int,
        default=8000,
        help="ä¼ºæœå™¨ç›£è½çš„åŸ è™Ÿ"
    )
    args = parser.parse_args()

    print(f"ğŸš€ [server_main] æº–å‚™åœ¨ {args.host}:{args.port} ä¸Šå•Ÿå‹• FastAPI æ‡‰ç”¨...")

    # é€™æ˜¯ä¸€å€‹é˜»å¡å¼å‘¼å«ï¼Œæœƒä¸€ç›´é‹è¡Œç›´åˆ°é€²ç¨‹è¢«çµ‚æ­¢
    uvicorn.run(
        "main:app",
        host=args.host,
        port=args.port,
        log_level="info"
    )

if __name__ == "__main__":
    main()
